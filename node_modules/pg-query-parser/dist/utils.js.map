{"version":3,"sources":["../src/utils.js"],"names":["walk","first","all","tables","byType","clean","EXIT","obj","func","_","isArray","item","results","push","isObject","key","Object","keys","value","object","query","type","tree","location"],"mappings":"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","file":"utils.js","sourcesContent":["import _ from 'lodash';\n\nconst EXIT = {};\n\nexport function walk(obj, func) {\n  if (_.isArray(obj)) {\n    for (const item of obj) {\n      if (func(obj, item) === EXIT) {\n        return item;\n      }\n    }\n\n    const results = [];\n\n    for (const item of obj) {\n      results.push(walk(item, func));\n    }\n\n    return results;\n  } else if (_.isObject(obj)) {\n    for (const key of Object.keys(obj)) {\n      const value = obj[key];\n\n      if (func(obj, key, value) === EXIT) {\n        return obj;\n      }\n    }\n\n    const results = [];\n\n    for (const key of Object.keys(obj)) {\n      const value = obj[key];\n\n      results.push(walk(value, func));\n    }\n\n    return results;\n  }\n\n  if (func(obj) === EXIT) {\n    return obj;\n  }\n\n  return null;\n}\n\nexport function first(obj, func) {\n  return walk(obj, (object, key, value) => {\n    if (func(object, key, value)) {\n      return EXIT;\n    }\n\n    return null;\n  });\n}\n\nexport function all(obj, func) {\n  const results = [];\n\n  walk(obj, (object, key, value) => {\n    if (func(object, key, value)) {\n      return results.push(object);\n    }\n\n    return null;\n  });\n\n  return results;\n}\n\nexport function tables(query) {\n  return all(query, (obj, key, value) => {\n    return key === 'RangeVar';\n  });\n}\n\nexport function byType(query, type) {\n  return all(query, (object, key, value) => {\n    return key === type;\n  });\n}\n\nexport function clean(tree) {\n  walk(tree, (object, key, value) => {\n    if (_.isArray(object)) {\n      return;\n    }\n\n    if (key === 'location') {\n      delete object.location;\n    }\n  });\n\n  return tree;\n}\n"]}